<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: search.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: search.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// This JS file contains the code that makes the search bar and filter work.
// When finding search results, the search function will search the dataset for the search term, and will add the ISBN of any book that matches the search term to an array
// The array is then stored in session storage (so it can be accessed later by the results page), and the user is redirected to the results page
// I used session storage as the search results page is a separate page, and I wanted to store the search results in case the user wants to switch between basic/detailed view of search results
// Furthermore, if I did not use session storage, the search results would be lost if the user refreshed the page
// I added this as I wanted the user to be able to search the data set

// Declare that books and sessionStorage are global variables for ESLint (ESLint, 2023a)
/* global books, sessionStorage */

// Makes Search Bar Work (MDN Web Docs, 2023b)
/**
 * @function search
 * @description Searches the database for the search term
 * @returns {void}
 */

// eslint-disable-next-line no-unused-vars -- Disabled as this function is indeed called from the HTML files
function search () {
    const searchhits = [];
    const searchterm = document.getElementById('searchquery').value;

    // Check what column(s) to search by, and add the ISBN of any book that matches the search term to the array

    if (document.getElementById('title').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].title) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('authors').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].authors) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('averageRating').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].averageRating) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('isbn').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].isbn) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('isbn13').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].isbn13) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('languageCode').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].languageCode) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('numPages').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].numPages) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('ratingsCount').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].ratingsCount) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('textReviewsCount').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].textReviewsCount) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('publicationDate').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].publicationDate) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('publisher').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].publisher) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    if (document.getElementById('bookid').className === 'dropdown-item active') {
        for (let i = 0; i &lt; books.length; i++) {
            if (searchterm === books[i].bookID) {
                searchhits.push(books[i].isbn);
            };
        };
    }

    // Store search results in session storage and redirect user to results page
    sessionStorage.setItem('search', searchhits);
}

// Makes Filter work
// When filtering, the filter function will change the class of the dropdown item to active or not active
// The search function will then work by checking if the class of the dropdown item is active or not
/**
 * @function filter
 * @description Filters the search results by the column(s) selected
 * @param {string} n The column to filter by
 * @returns {void}
 */

// eslint-disable-next-line no-unused-vars -- Disabled as this function is indeed called from the HTML files
function filter (n) {
    if (document.getElementById(n).className === 'dropdown-item active') {
        document.getElementById(n).className = 'dropdown-item';
    } else {
        document.getElementById(n).className = 'dropdown-item active';
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Book.html">Book</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addbook">addbook</a></li><li><a href="global.html#filter">filter</a></li><li><a href="global.html#removebook">removebook</a></li><li><a href="global.html#revert">revert</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#tbbasic">tbbasic</a></li><li><a href="global.html#tbdetailed">tbdetailed</a></li><li><a href="global.html#tbsearchbasic">tbsearchbasic</a></li><li><a href="global.html#tbsearchdetailed">tbsearchdetailed</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Jan 18 2024 20:57:04 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
